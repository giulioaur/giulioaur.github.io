"use strict";const m_carousel={carousel:null,innerContainer:null,items:[],carouselState:{},activeItemClass:"m-carousel-item-active",currentTween:null,width:0,initCarousel(){this.carousel=document.getElementById("m-carousel"),this.innerContainer=this.carousel.children[0],this.items=this.carousel.querySelectorAll(".m-carousel-item"),this.carousel.querySelector(".m-carousel-control-left").onmouseenter=()=>{this.goToItem(this.getLeftOuterElement())},this.carousel.querySelector(".m-carousel-control-right").onmouseenter=()=>{this.goToItem(this.getRightOuterElement())},this.resize(),this.bindTouchEvents()},goToItem(t){if(t<0||t>=this.items.length||!this.innerContainer)return;const e=this.innerContainer.querySelector(`.${this.activeItemClass}`),i=this.items[t],s=$(i).position().left,n=gsap.getProperty(this.innerContainer,"x");s<=-n?(this.stopAnim(),this.currentTween=gsap.to(this.innerContainer,{x:Math.min(0,n+i.offsetWidth),duration:.7})):s+i.offsetWidth>=-n+this.carousel.offsetWidth&&(this.stopAnim(),this.currentTween=gsap.to(this.innerContainer,{x:n-i.offsetWidth,duration:.7})),e&&e.classList.remove(this.activeItemClass),i.classList.add(this.activeItemClass)},getLeftOuterElement(){const t=gsap.getProperty(this.innerContainer,"x");for(let e=0;e<this.items.length;++e)if($(this.items[e]).position().left>-t)return e-1},getRightOuterElement(){const t=gsap.getProperty(this.innerContainer,"x");for(let e=this.items.length-1;e>0;--e){const i=this.items[e];if($(i).position().left+i.offsetWidth<-t+this.carousel.offsetWidth)return e+1}},stopAnim(){this.currentTween&&this.currentTween.kill()},clearItem(t){t.classList.remove(m_carousel.activeItemClass)},restoreItem(t,e){e&&t.classList.add(m_carousel.activeItemClass)},resize(){this.width=0,this.items.length>0&&(this.items.forEach(((t,e)=>{this.width+=t.offsetWidth})),this.width=Math.max(this.width+.8*this.width,document.getElementById("m-carousel").offsetWidth)),this.innerContainer.style.width=this.width+"px"},bindTouchEvents(){const t=this,e=-(this.innerContainer.offsetWidth-3*this.items[0].offsetWidth);let i,s=0,n=0;this.innerContainer.addEventListener("touchstart",(t=>{const e=t.changedTouches[0];e&&(s=e.pageX,i=setInterval((()=>n=n>0?Math.max(n-1,0):Math.min(n+1,0)),.2))}),!1),this.innerContainer.addEventListener("touchend",(s=>{if(!s.changedTouches[0])return;const r=gsap.getProperty(t.innerContainer,"x")-n;t.stopAnim(),t.currentTween=gsap.to(t.innerContainer,{x:r.clamp(e,0)}),clearInterval(i)}),!1),this.innerContainer.addEventListener("touchmove",(i=>{const r=i.changedTouches[0];if(!r)return;const o=s,a=r.pageX,h=gsap.getProperty(t.innerContainer,"x")-10*(o-a);n+=4*Math.sign(o-a),t.currentTween=gsap.to(t.innerContainer,{x:h.clamp(e,0)}),s=a}),!1)}};$(document).ready((()=>{m_carousel.initCarousel()})),$(window).resize((()=>{m_carousel.resize()}));